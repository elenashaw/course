# AMAT

**AMAT (Average Memory Access Time)**，即**平均内存访问时间**，是计算机体系结构中衡量存储层次结构性能的核心模型。它将复杂的硬件行为简化为一个线性加权公式，帮助工程师快速评估性能瓶颈。

------

###  核心公式

最基础的 AMAT 模型由两部分组成：**命中时间**和**未命中带来的额外开销**。

$$AMAT = Hit\,Time + Miss\,Rate \times Miss\,Penalty$$

- **Hit Time (命中时间)：** 访问最高级存储器（通常是 L1 Cache）所需的时间。
- **Miss Rate (未命中率)：** 在该层找不到数据的概率。
- **Miss Penalty (未命中惩罚)：** 如果该层没中，去下一级存储器获取数据并传回所需的**额外**时间。

------

### AMAT是个简化模型

在真实的硬件运行中，数据流转非常复杂，但 AMAT 做了以下三个关键简化：

- **串行化假设：** 它假设访问是层级分明的（L1 $\rightarrow$ L2 $\rightarrow$ 内存），忽略了现代 CPU 并行发出多个访问请求（非阻塞缓存）的情况。
- **单一维度：** 它主要关注“延迟（Latency）”，而忽略了“带宽（Bandwidth）”。在处理大数据量时，带宽往往比 AMAT 更重要。
- **忽略开销差异：** 它通常不区分“读未命中”和“写未命中”，但在物理层面上，这两者的处理逻辑和耗时通常是不对称的。

------

###  多级层次的嵌套

当系统存在多级缓存（如 Cache、RAM、Disk）时，AMAT 模型会呈现**嵌套结构**。每一级的 $Miss\,Penalty$ 实际上就是下一级的 $AMAT$。

例如，对于“Cache + RAM”系统：
$$
AMAT = T_{Cache} + (Miss\,Rate_{Cache} \times T_{RAM})
$$
